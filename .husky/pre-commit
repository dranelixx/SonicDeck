echo "ğŸš€ Running pre-commit checks for Sonic Deck..."

# Sync version from version.json to all config files
echo "ğŸ“¦ Syncing version..."
node scripts/sync-version.js || exit 1

# Auto-add synced version files
git add package.json src-tauri/Cargo.toml src-tauri/tauri.conf.json || exit 1

# TypeScript type check
echo "ğŸ” TypeScript compilation check..."
yarn typecheck || exit 1

# Lint and format staged files
echo "ğŸ§¹ Linting and formatting..."
yarn lint-staged || exit 1

# Rust compilation check
echo "ğŸ¦€ Rust compilation check..."
cd src-tauri && cargo check --quiet || exit 1

echo "âœ… Pre-commit checks passed!"
